<div class="request_card-details style-3" fxLayout="row" fxLayout.xs="column">
  <span style="position: absolute; right: 10px; top: 10px"
    ><button (click)="onClose()" mat-icon-button aria-label="close Icon">
      <mat-icon>close</mat-icon>
    </button></span
  >
  <section
    style="padding: 40px; border-right: 1px solid #c8c8c8"
    fxFlex="65"
    class="request_sesstion"
    fxLayout="row"
    fxLayoutAlign="center"
  >
    <div style="max-width: 450px">
      <div
        fxLayout="row"
        fxLayoutAlign="end"
        fxLayoutGap="10px"
        style="margin-bottom: 10px"
      >
        <div fxLayout="row" fxLayoutAlign="center center">
          <mat-icon>pin_drop</mat-icon>
          <a (click) = "openProposeDialog()">Đề xuất cho nhóm</a>
        </div>
        <div fxLayout="row" fxLayoutAlign="center center">
          <mat-icon>check</mat-icon>
          <a>Xác thực</a>
        </div>
      </div>
      <div class="p-1" style="border: 1px solid #c8c8c8; border-radius: 10px">
        <mat-chip-list aria-label="tag">
          <mat-chip color="primary" selected>
            <mat-icon>error</mat-icon
            >{{ mapPriority.get(request?.priority_type!) }}
          </mat-chip>
          <mat-chip
            *ngFor="let type of request?.support_types"
            color="accent"
            selected
            >{{ type.name }}</mat-chip
          >
          <mat-chip
            *ngFor="let object of request?.requester_object_status"
            color="accent"
            selected
          >
            {{ object.name }}</mat-chip
          >
          <mat-chip> <mat-icon>done</mat-icon>Đã xác thực </mat-chip>
        </mat-chip-list>
        <br />
        <h3>
          <b>{{ request?.subject }}</b>
        </h3>
        <mat-card-subtitle>10 phút trước, Hôm nay</mat-card-subtitle>
        <br />
        <div *ngIf="pageEvent" style="margin-top: 15px">
          <section
            *ngIf="request?.medias?.[pageEvent.pageIndex]?.mime_type=='image'"
            class="img_container"
          >
            <img src="{{request?.medias?.[pageEvent.pageIndex]?.url!}}" />
          </section>

          <section
            *ngIf="request?.medias?.[pageEvent.pageIndex]?.mime_type=='video'"
            class="img_container"
          >
            <video height="100%" width="auto" controls>
              <source
                src="{{request?.medias?.[pageEvent.pageIndex]?.url!}}"
                type="video/mp4"
              />
            </video>
          </section>
          <mat-paginator
            [hidePageSize]="true"
            [length]="length"
            [pageSize]="pageSize"
            (page)="pageEvent = $event"
            aria-label="Select page"
          >
          </mat-paginator>
        </div>
        <div>
          <p>
            Người cần hỗ trợ: <b>{{ request?.contact_info?.name }}</b>
          </p>
          <p>
            Số điện thoại: <b>{{ request?.contact_info?.phone_number }}</b>
          </p>
          <p>
            Địa chỉ: <b>{{ request?.address_info?.address! }}</b>
          </p>
          <p style="margin-top: 30px">
            Người gửi:<br />
            <b>{{ request?.created_by }}</b>
          </p>
        </div>
      </div>

      <div style="margin-top: 30px">
        <!-- <p>Trạng thái:</p>
        <h3>
          <b>{{ mapStatus.get(request?.status) }}</b>
        </h3>
        <br /> -->
        <p style="font-weight: bold; font-size: 17px">Nhóm trợ giúp</p>
        <app-button
          height="35"
          color="primary"
          text="Tham gia trợ giúp"
          (click)="openDialog()"
        >
        </app-button>
        <div fxLayout="column" fxLayoutGap="10px" style="margin-top: 15px" *ngFor = 'let supporter of request?.supporters'>
          <app-support-card [supporter] = supporter></app-support-card>
        </div>
      </div>
    </div>
  </section>

  <!-- <section fxFlex="1/3" class="p-1 activity_sestion">
    <p style="font-weight: bold; font-size: 17px;">Hoạt động thiện nguyện</p>
    <button
      style="width: 100%; margin: 10px 0;"
      (click)="openTransDialog()"
      mat-flat-button
      color="primary"
    >
      Cập nhật
    </button>
    <div *ngFor="let tran of trans" style="margin-bottom: 10px;">
      <app-trans-card [trans]="tran"></app-trans-card>
    </div>
  </section> -->
  <section fxFlex="35" class="p-1 comment_sestion" style="padding: 40px">
    <p style="font-weight: bold; font-size: 17px">Bình luận</p>
    <sos-input
      (keyup.enter)="show($event)"
      label="Viết cập nhật..."
    ></sos-input>

    <div *ngFor="let new of news" style="margin-bottom: 15px">
      <app-comment [new]="new"></app-comment>
    </div>
  </section>
</div>
